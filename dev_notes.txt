In .env, set LOG_ACTIVITYPUB_TO_DB = 1 so that incoming federation Activities will appear in yourdomain.tld/admin/activities.
Also at yourdomain.tld/admin/misc consider turning on "Log ActivityPub JSON for debugging" to see the full JSON of what is sent
to your instance.

Ensure that the FLASK_APP environmenet variable is set to pyfedi.py.

For running celery during development, run this:

celery -A celery_worker.celery worker --loglevel=INFO


On a production web server, celery is managed by systemd: /etc/default/celeryd and /etc/systemd/system/celeryd.service

sudo systemctl stop celeryd
sudo systemctl restart celeryd or sudo service celeryd restart

*** check for celery-related problems by looking in /var/log/celery ***

for profiling:
use
python profile_app.py
instead of
flask run



translations:

See https://blog.miguelgrinberg.com/post/the-flask-mega-tutorial-part-xiii-i18n-and-l10n-2018

to add a new language which can be worked on:

pybabel init -i messages.pot -d app/translations -l <language code>

after changes to the files in app/translations/* are mode, they need to be compiled
pybabel compile -d app/translations



sass is used to compile .scss files into .css files. https://sass-lang.com/dart-sass/. Get the latest version of the
command line app from https://github.com/sass/dart-sass/releases/ as old versions produce slightly different output.



If you get CSRF errors when submitting forms, go into .env and set:
SESSION_COOKIE_SECURE='False'
SESSION_COOKIE_HTTPONLY='False'

Do not use those values in production.


performance profiling:
export FLASK_APP=profile_app.py (instead of pyfedi.py)
flask run

