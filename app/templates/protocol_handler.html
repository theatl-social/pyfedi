{% if theme() != 'piefed' and file_exists('app/templates/themes/' + theme() + '/base.html') -%}
    {% extends 'themes/' + theme() + '/base.html' -%}
{% else -%}
    {% extends "base.html" -%}
{% endif -%}

{% block app_content %}
<div class="row">
    <main class="row position-relative main_pane">
        <div class="col-12 col-lg-8">
        <h1>{{ title }}</h1>
        <p><button id="registerProtocolHandler">{{ _('Register protocol handler') }}</button></p>
        <p><button id="unRegisterProtocolHandler" class="d-none">{{ _('Un-register protocol handler') }}</button></p>
        </div>
    </main>
</div>
{% endblock %}

{% block end_scripts -%}
    <script nonce="{{ nonce }}">
        document.addEventListener("DOMContentLoaded", function () {
            const registerBtn = document.getElementById('registerProtocolHandler');
            const unRegisterBtn = document.getElementById('unRegisterProtocolHandler');
            registerBtn.addEventListener('click', function () {
                navigator.registerProtocolHandler("web+ap", "https://{{ instance_domain }}/protocol_handler?to=%s");
                alert('Links starting with web+ap:// will be displayed by {{ instance_domain }}.');
                registerBtn.classList.add('d-none');
                unRegisterBtn.classList.remove('d-none');
            });
            unRegisterBtn.addEventListener('click', function () {
                navigator.unregisterProtocolHandler("web+ap", "https://{{ instance_domain }}/protocol_handler?to=%s");
                alert('Links starting with web+ap:// will not be displayed by {{ instance_domain }}.');
                unRegisterBtn.classList.add('d-none');
                registerBtn.classList.remove('d-none');
            });
        });
    </script>
{% endblock -%}