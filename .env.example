# PeachPie Environment Configuration Example
# Copy this file to .env and update with your values

# Required Configuration
SERVER_NAME=your-domain.com
SECRET_KEY=change-this-to-random-characters-at-least-32-chars
DATABASE_URL=postgresql://user:password@localhost:5432/peachpie

# Redis Configuration (consolidated)
REDIS_URL=redis://localhost:6379/0

# Software Branding
SOFTWARE_NAME=PeachPie
SOFTWARE_REPO=https://github.com/theatl-social/peachpie
SOFTWARE_VERSION=1.0.1

# Email Configuration (optional but recommended)
MAIL_SERVER=smtp.gmail.com
MAIL_PORT=587
MAIL_USE_TLS=1
MAIL_USERNAME=your-email@gmail.com
MAIL_PASSWORD=your-app-password
MAIL_FROM=noreply@your-domain.com

# Admin User (for non-interactive setup)
ADMIN_USERNAME=admin
ADMIN_EMAIL=admin@your-domain.com
ADMIN_PASSWORD=secure-admin-password
SITE_NAME=PeachPie Instance
SITE_DESCRIPTION=A federated discussion platform

# Optional Features
ENABLE_ALPHA_API=false
SERVE_API_DOCS=false
LOG_ACTIVITYPUB_TO_DB=false
LOG_ACTIVITYPUB_TO_FILE=false

# S3 Storage (optional)
S3_REGION=us-east-1
S3_ENDPOINT=https://s3.amazonaws.com
S3_BUCKET=your-bucket-name
S3_ACCESS_KEY=your-access-key
S3_ACCESS_SECRET=your-secret-key
S3_PUBLIC_URL=https://cdn.your-domain.com

# OAuth Providers (optional)
GOOGLE_OAUTH_CLIENT_ID=
GOOGLE_OAUTH_SECRET=

MASTODON_OAUTH_CLIENT_ID=
MASTODON_OAUTH_SECRET=
MASTODON_OAUTH_DOMAIN=

DISCORD_OAUTH_CLIENT_ID=
DISCORD_OAUTH_SECRET=

# Performance Tuning
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=30
PAGE_LENGTH=100

# Security
SESSION_COOKIE_SECURE=1
SESSION_COOKIE_HTTPONLY=1
MAX_CONTENT_LENGTH=10485760  # 10MB

# Actor Creation Limits
ACTORS_PER_INSTANCE_HOUR=1000
ACTORS_PER_INSTANCE_DAY=5000
TOTAL_ACTORS_PER_HOUR=2500

# Vote Protection
MAX_ANNOUNCES_PER_OBJECT=5
VOTE_RATE_LIMIT_PER_ACTOR=100

# Rate Limiting (format: requests/seconds)
RATE_LIMIT_ACTIVITIES=100/60       # 100 activities per minute
RATE_LIMIT_FOLLOWS=20/300          # 20 follows per 5 minutes
RATE_LIMIT_VOTES=200/60            # 200 votes per minute
RATE_LIMIT_MEDIA=30/60             # 30 media requests per minute
RATE_LIMIT_GLOBAL=300/60           # 300 total requests per minute

# Development/Debug (set to 0 in production)
FLASK_DEBUG=0
SQLALCHEMY_ECHO=0

# Legacy Redis Variables (for backward compatibility)
# These will use REDIS_URL if not explicitly set
# CACHE_REDIS_URL=redis://localhost:6379/1
# CELERY_BROKER_URL=redis://localhost:6379/0
# RESULT_BACKEND=redis://localhost:6379/0